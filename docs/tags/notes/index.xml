<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Notes on CGSpace Notes</title>
    <link>https://alanorth.github.io/cgspace-notes/tags/notes/</link>
    <description>Recent content in Notes on CGSpace Notes</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Mon, 30 Nov 2020 12:10:20 +0200</lastBuildDate>
    <atom:link href="https://alanorth.github.io/cgspace-notes/tags/notes/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>September, 2017</title>
      <link>https://alanorth.github.io/cgspace-notes/2017-09/</link>
      <pubDate>Thu, 07 Sep 2017 16:54:52 +0700</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2017-09/</guid>
      <description>&lt;h2 id=&#34;2017-09-06&#34;&gt;2017-09-06&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Linode sent an alert that CGSpace (linode18) was using 261% CPU for the past two hours&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2017-09-07&#34;&gt;2017-09-07&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Ask Sisay to clean up the WLE approvers a bit, as Marianne&amp;rsquo;s user account is both in the approvers step as well as the group&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>August, 2017</title>
      <link>https://alanorth.github.io/cgspace-notes/2017-08/</link>
      <pubDate>Tue, 01 Aug 2017 11:51:52 +0300</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2017-08/</guid>
      <description>&lt;h2 id=&#34;2017-08-01&#34;&gt;2017-08-01&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Linode sent an alert that CGSpace (linode18) was using 350% CPU for the past two hours&lt;/li&gt;&#xA;&lt;li&gt;I looked in the Activity pane of the Admin Control Panel and it seems that Google, Baidu, Yahoo, and Bing are all crawling with massive numbers of bots concurrently (~100 total, mostly Baidu and Google)&lt;/li&gt;&#xA;&lt;li&gt;The good thing is that, according to &lt;code&gt;dspace.log.2017-08-01&lt;/code&gt;, they are all using the same Tomcat session&lt;/li&gt;&#xA;&lt;li&gt;This means our Tomcat Crawler Session Valve is working&lt;/li&gt;&#xA;&lt;li&gt;But many of the bots are browsing dynamic URLs like:&#xA;&lt;ul&gt;&#xA;&lt;li&gt;/handle/10568/3353/discover&lt;/li&gt;&#xA;&lt;li&gt;/handle/10568/16510/browse&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;The &lt;code&gt;robots.txt&lt;/code&gt; only blocks the top-level &lt;code&gt;/discover&lt;/code&gt; and &lt;code&gt;/browse&lt;/code&gt; URLs&amp;hellip; we will need to find a way to forbid them from accessing these!&lt;/li&gt;&#xA;&lt;li&gt;Relevant issue from DSpace Jira (semi resolved in DSpace 6.0): &lt;a href=&#34;https://jira.duraspace.org/browse/DS-2962&#34;&gt;https://jira.duraspace.org/browse/DS-2962&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;It turns out that we&amp;rsquo;re already adding the &lt;code&gt;X-Robots-Tag &amp;quot;none&amp;quot;&lt;/code&gt; HTTP header, but this only forbids the search engine from &lt;em&gt;indexing&lt;/em&gt; the page, not crawling it!&lt;/li&gt;&#xA;&lt;li&gt;Also, the bot has to successfully browse the page first so it can receive the HTTP header&amp;hellip;&lt;/li&gt;&#xA;&lt;li&gt;We might actually have to &lt;em&gt;block&lt;/em&gt; these requests with HTTP 403 depending on the user agent&lt;/li&gt;&#xA;&lt;li&gt;Abenet pointed out that the CGIAR Library Historical Archive collection I sent July 20th only had ~100 entries, instead of 2415&lt;/li&gt;&#xA;&lt;li&gt;This was due to newline characters in the &lt;code&gt;dc.description.abstract&lt;/code&gt; column, which caused OpenRefine to choke when exporting the CSV&lt;/li&gt;&#xA;&lt;li&gt;I exported a new CSV from the collection on DSpace Test and then manually removed the characters in vim using &lt;code&gt;g/^$/d&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Then I cleaned up the author authorities and HTML characters in OpenRefine and sent the file back to Abenet&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>July, 2017</title>
      <link>https://alanorth.github.io/cgspace-notes/2017-07/</link>
      <pubDate>Sat, 01 Jul 2017 18:03:52 +0300</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2017-07/</guid>
      <description>&lt;h2 id=&#34;2017-07-01&#34;&gt;2017-07-01&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Run system updates and reboot DSpace Test&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2017-07-04&#34;&gt;2017-07-04&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Merge changes for WLE Phase II theme rename (&lt;a href=&#34;https://github.com/ilri/DSpace/pull/329&#34;&gt;#329&lt;/a&gt;)&lt;/li&gt;&#xA;&lt;li&gt;Looking at extracting the metadata registries from ICARDA&amp;rsquo;s MEL DSpace database so we can compare fields with CGSpace&lt;/li&gt;&#xA;&lt;li&gt;We can use PostgreSQL&amp;rsquo;s extended output format (&lt;code&gt;-x&lt;/code&gt;) plus &lt;code&gt;sed&lt;/code&gt; to format the output into quasi XML:&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>June, 2017</title>
      <link>https://alanorth.github.io/cgspace-notes/2017-06/</link>
      <pubDate>Thu, 01 Jun 2017 10:14:52 +0300</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2017-06/</guid>
      <description>&lt;h2 id=&#34;2017-06-01&#34;&gt;2017-06-01&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;After discussion with WLE and CGSpace content people, we decided to just add one metadata field for the WLE Research Themes&lt;/li&gt;&#xA;&lt;li&gt;The &lt;code&gt;cg.identifier.wletheme&lt;/code&gt; field will be used for both Phase I and Phase II Research Themes&lt;/li&gt;&#xA;&lt;li&gt;Then we&amp;rsquo;ll create a new sub-community for Phase II and create collections for the research themes there&lt;/li&gt;&#xA;&lt;li&gt;The current &amp;ldquo;Research Themes&amp;rdquo; community will be renamed to &amp;ldquo;WLE Phase I Research Themes&amp;rdquo;&lt;/li&gt;&#xA;&lt;li&gt;Tagged all items in the current Phase I collections with their appropriate themes&lt;/li&gt;&#xA;&lt;li&gt;Create pull request to add Phase II research themes to the submission form: &lt;a href=&#34;https://github.com/ilri/DSpace/pull/328&#34;&gt;#328&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;Add &lt;code&gt;cg.subject.system&lt;/code&gt; to CGSpace metadata registry, for subject from the upcoming CGIAR Library migration&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2017-06-04&#34;&gt;2017-06-04&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;After adding &lt;code&gt;cg.identifier.wletheme&lt;/code&gt; to 1106 WLE items I can see the field on XMLUI but not in REST!&lt;/li&gt;&#xA;&lt;li&gt;Strangely it happens on DSpace Test AND on CGSpace!&lt;/li&gt;&#xA;&lt;li&gt;I tried to re-index Discovery but it didn&amp;rsquo;t fix it&lt;/li&gt;&#xA;&lt;li&gt;Run all system updates on DSpace Test and reboot the server&lt;/li&gt;&#xA;&lt;li&gt;After rebooting the server (and therefore restarting Tomcat) the new metadata field is available&lt;/li&gt;&#xA;&lt;li&gt;I&amp;rsquo;ve sent a message to the dspace-tech mailing list to ask if this is a bug and whether I should file a Jira ticket&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2016-06-05&#34;&gt;2016-06-05&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Rename WLE&amp;rsquo;s &amp;ldquo;Research Themes&amp;rdquo; sub-community to &amp;ldquo;WLE Phase I Research Themes&amp;rdquo; on DSpace Test so Macaroni Bros can continue their testing&lt;/li&gt;&#xA;&lt;li&gt;Macaroni Bros tested it and said it&amp;rsquo;s fine, so I renamed it on CGSpace as well&lt;/li&gt;&#xA;&lt;li&gt;Working on how to automate the extraction of the CIAT Book chapters, doing some magic in OpenRefine to extract page from–to from cg.identifier.url and dc.format.extent, respectively:&#xA;&lt;ul&gt;&#xA;&lt;li&gt;cg.identifier.url: &lt;code&gt;value.split(&amp;quot;page=&amp;quot;, &amp;quot;&amp;quot;)[1]&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;dc.format.extent: &lt;code&gt;value.replace(&amp;quot;p. &amp;quot;, &amp;quot;&amp;quot;).split(&amp;quot;-&amp;quot;)[1].toNumber() - value.replace(&amp;quot;p. &amp;quot;, &amp;quot;&amp;quot;).split(&amp;quot;-&amp;quot;)[0].toNumber()&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;Finally, after some filtering to see which small outliers there were (based on dc.format.extent using &amp;ldquo;p. 1-14&amp;rdquo; vs &amp;ldquo;29 p.&amp;rdquo;), create a new column with last page number:&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;cells[&amp;quot;dc.page.from&amp;quot;].value.toNumber() + cells[&amp;quot;dc.format.pages&amp;quot;].value.toNumber()&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;Then create a new, unique file name to be used in the output, based on a SHA1 of the dc.title and with a description:&#xA;&lt;ul&gt;&#xA;&lt;li&gt;dc.page.to: &lt;code&gt;value.split(&amp;quot; &amp;quot;)[0].replace(&amp;quot;,&amp;quot;,&amp;quot;&amp;quot;).toLowercase() + &amp;quot;-&amp;quot; + sha1(value).get(1,9) + &amp;quot;.pdf__description:&amp;quot; + cells[&amp;quot;dc.type&amp;quot;].value&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;Start processing 769 records after filtering the following (there are another 159 records that have some other format, or for example they have their own PDF which I will process later), using a modified &lt;code&gt;generate-thumbnails.py&lt;/code&gt; script to read certain fields and then pass to GhostScript:&#xA;&lt;ul&gt;&#xA;&lt;li&gt;cg.identifier.url: &lt;code&gt;value.contains(&amp;quot;page=&amp;quot;)&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;dc.format.extent: &lt;code&gt;or(value.contains(&amp;quot;p. &amp;quot;),value.contains(&amp;quot; p.&amp;quot;))&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Command like: &lt;code&gt;$ gs -dNOPAUSE -dBATCH -dFirstPage=14 -dLastPage=27 -sDEVICE=pdfwrite -sOutputFile=beans.pdf -f 12605-1.pdf&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;17 of the items have issues with incorrect page number ranges, and upon closer inspection they do not appear in the referenced PDF&lt;/li&gt;&#xA;&lt;li&gt;I&amp;rsquo;ve flagged them and proceeded without them (752 total) on DSpace Test:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ JAVA_OPTS=&amp;#34;-Xmx1024m -Dfile.encoding=UTF-8&amp;#34; [dspace]/bin/dspace import --add --eperson=aorth@mjanja.ch --collection=10568/93843 --source /home/aorth/src/CIAT-Books/SimpleArchiveFormat/ --mapfile=/tmp/ciat-books.map &amp;amp;&amp;gt; /tmp/ciat-books.log&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&#xA;&lt;li&gt;I went and did some basic sanity checks on the remaining items in the CIAT Book Chapters and decided they are mostly fine (except one duplicate and the flagged ones), so I imported them to DSpace Test too (162 items)&lt;/li&gt;&#xA;&lt;li&gt;Total items in CIAT Book Chapters is 914, with the others being flagged for some reason, and we should send that back to CIAT&lt;/li&gt;&#xA;&lt;li&gt;Restart Tomcat on CGSpace so that the &lt;code&gt;cg.identifier.wletheme&lt;/code&gt; field is available on REST API for Macaroni Bros&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2017-06-07&#34;&gt;2017-06-07&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Testing &lt;a href=&#34;https://github.com/ilri/DSpace/pull/319&#34;&gt;Atmire&amp;rsquo;s patch for the CUA Workflow Statistics again&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;Still doesn&amp;rsquo;t seem to give results I&amp;rsquo;d expect, like there are no results for Maria Garruccio, or for the ILRI community!&lt;/li&gt;&#xA;&lt;li&gt;Then I&amp;rsquo;ll file an update to the issue on Atmire&amp;rsquo;s tracker&lt;/li&gt;&#xA;&lt;li&gt;Created a new branch with just the relevant changes, so I can send it to them&lt;/li&gt;&#xA;&lt;li&gt;One thing I noticed is that there is a failed database migration related to CUA:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;+----------------+----------------------------+---------------------+---------+&#xA;| Version        | Description                | Installed on        | State   |&#xA;+----------------+----------------------------+---------------------+---------+&#xA;| 1.1            | Initial DSpace 1.1 databas |                     | PreInit |&#xA;| 1.2            | Upgrade to DSpace 1.2 sche |                     | PreInit |&#xA;| 1.3            | Upgrade to DSpace 1.3 sche |                     | PreInit |&#xA;| 1.3.9          | Drop constraint for DSpace |                     | PreInit |&#xA;| 1.4            | Upgrade to DSpace 1.4 sche |                     | PreInit |&#xA;| 1.5            | Upgrade to DSpace 1.5 sche |                     | PreInit |&#xA;| 1.5.9          | Drop constraint for DSpace |                     | PreInit |&#xA;| 1.6            | Upgrade to DSpace 1.6 sche |                     | PreInit |&#xA;| 1.7            | Upgrade to DSpace 1.7 sche |                     | PreInit |&#xA;| 1.8            | Upgrade to DSpace 1.8 sche |                     | PreInit |&#xA;| 3.0            | Upgrade to DSpace 3.x sche |                     | PreInit |&#xA;| 4.0            | Initializing from DSpace 4 | 2015-11-20 12:42:52 | Success |&#xA;| 5.0.2014.08.08 | DS-1945 Helpdesk Request a | 2015-11-20 12:42:53 | Success |&#xA;| 5.0.2014.09.25 | DS 1582 Metadata For All O | 2015-11-20 12:42:55 | Success |&#xA;| 5.0.2014.09.26 | DS-1582 Metadata For All O | 2015-11-20 12:42:55 | Success |&#xA;| 5.0.2015.01.27 | MigrateAtmireExtraMetadata | 2015-11-20 12:43:29 | Success |&#xA;| 5.0.2017.04.28 | CUA eperson metadata migra | 2017-06-07 11:07:28 | OutOrde |&#xA;| 5.5.2015.12.03 | Atmire CUA 4 migration     | 2016-11-27 06:39:05 | OutOrde |&#xA;| 5.5.2015.12.03 | Atmire MQM migration       | 2016-11-27 06:39:06 | OutOrde |&#xA;| 5.6.2016.08.08 | CUA emailreport migration  | 2017-01-29 11:18:56 | OutOrde |&#xA;+----------------+----------------------------+---------------------+---------+&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&#xA;&lt;li&gt;Merge the pull request for &lt;a href=&#34;https://github.com/ilri/DSpace/pull/328&#34;&gt;WLE Phase II themes&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2017-06-18&#34;&gt;2017-06-18&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Redeploy CGSpace with latest changes from &lt;code&gt;5_x-prod&lt;/code&gt;, run system updates, and reboot the server&lt;/li&gt;&#xA;&lt;li&gt;Continue working on ansible infrastructure changes for CGIAR Library&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2017-06-20&#34;&gt;2017-06-20&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Import Abenet and Peter&amp;rsquo;s changes to the CGIAR Library CRP community&lt;/li&gt;&#xA;&lt;li&gt;Due to them using Windows and renaming some columns there were formatting, encoding, and duplicate metadata value issues&lt;/li&gt;&#xA;&lt;li&gt;I had to remove some fields from the CSV and rename some back to, ie, &lt;code&gt;dc.subject[en_US]&lt;/code&gt; just so DSpace would detect changes properly&lt;/li&gt;&#xA;&lt;li&gt;Now it looks much better: &lt;a href=&#34;https://dspacetest.cgiar.org/handle/10947/2517&#34;&gt;https://dspacetest.cgiar.org/handle/10947/2517&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;Removing the HTML tags and HTML/XML entities using the following GREL:&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;replace(value,/&amp;lt;\/?\w+((\s+\w+(\s*=\s*(?:&amp;quot;.*?&amp;quot;|&#39;.*?&#39;|[^&#39;&amp;quot;&amp;gt;\s]+))?)+\s*|\s*)\/?&amp;gt;/,&#39;&#39;)&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;value.unescape(&amp;quot;html&amp;quot;).unescape(&amp;quot;xml&amp;quot;)&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;Finally import 914 CIAT Book Chapters to CGSpace in two batches:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ JAVA_OPTS=&amp;#34;-Xmx1024m -Dfile.encoding=UTF-8&amp;#34; [dspace]/bin/dspace import --add --eperson=aorth@mjanja.ch --collection=10568/35701 --source /home/aorth/CIAT-Books/SimpleArchiveFormat/ --mapfile=/tmp/ciat-books.map &amp;amp;&amp;gt; /tmp/ciat-books.log&#xA;$ JAVA_OPTS=&amp;#34;-Xmx1024m -Dfile.encoding=UTF-8&amp;#34; [dspace]/bin/dspace import --add --eperson=aorth@mjanja.ch --collection=10568/35701 --source /home/aorth/CIAT-Books/SimpleArchiveFormat/ --mapfile=/tmp/ciat-books2.map &amp;amp;&amp;gt; /tmp/ciat-books2.log&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;2017-06-25&#34;&gt;2017-06-25&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;WLE has said that one of their Phase II research themes is being renamed from &lt;code&gt;Regenerating Degraded Landscapes&lt;/code&gt; to &lt;code&gt;Restoring Degraded Landscapes&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Pull request with the changes to &lt;code&gt;input-forms.xml&lt;/code&gt;: &lt;a href=&#34;https://github.com/ilri/DSpace/pull/329&#34;&gt;#329&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;As of now it doesn&amp;rsquo;t look like there are any items using this research theme so we don&amp;rsquo;t need to do any updates:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;dspace=# select text_value from metadatavalue where resource_type_id=2 and metadata_field_id=237 and text_value like &amp;#39;Regenerating Degraded Landscapes%&amp;#39;;&#xA; text_value&#xA;------------&#xA;(0 rows)&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&#xA;&lt;li&gt;Marianne from WLE asked if they can have both Phase I and II research themes together in the item submission form&lt;/li&gt;&#xA;&lt;li&gt;Perhaps we can add them together in the same question for &lt;code&gt;cg.identifier.wletheme&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2017-06-30&#34;&gt;2017-06-30&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;CGSpace went down briefly, I see lots of these errors in the dspace logs:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Java stacktrace: java.util.NoSuchElementException: Timeout waiting for idle object&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&#xA;&lt;li&gt;After looking at the Tomcat logs, Munin graphs, and PostgreSQL connection stats, it seems there is just a high load&lt;/li&gt;&#xA;&lt;li&gt;Might be a good time to adjust DSpace&amp;rsquo;s database connection settings, like I first mentioned in April, 2017 after reading the &lt;a href=&#34;https://wiki.lyrasis.org/display/cmtygp/DCAT+Meeting+April+2017&#34;&gt;2017-04 DCAT comments&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;I&amp;rsquo;ve adjusted the following in CGSpace&amp;rsquo;s config:&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;db.maxconnections&lt;/code&gt; 30→70 (the default PostgreSQL config allows 100 connections, so DSpace&amp;rsquo;s default of 30 is quite low)&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;db.maxwait&lt;/code&gt; 5000→10000&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;db.maxidle&lt;/code&gt; 8→20 (DSpace default is -1, unlimited, but we had set it to 8 earlier)&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;We will need to adjust this again (as well as the &lt;code&gt;pg_hba.conf&lt;/code&gt; settings) when we deploy tsega&amp;rsquo;s REST API&lt;/li&gt;&#xA;&lt;li&gt;Whip up a test for Marianne of WLE to be able to show both their Phase I and II research themes in the CGSpace item submission form:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://alanorth.github.io/cgspace-notes/2017/06/wle-theme-test-a.png&#34; alt=&#34;Test A for displaying the Phase I and II research themes&#34;&gt;&#xA;&lt;img src=&#34;https://alanorth.github.io/cgspace-notes/2017/06/wle-theme-test-b.png&#34; alt=&#34;Test B for displaying the Phase I and II research themes&#34;&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>May, 2017</title>
      <link>https://alanorth.github.io/cgspace-notes/2017-05/</link>
      <pubDate>Mon, 01 May 2017 16:21:52 +0200</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2017-05/</guid>
      <description>&lt;h2 id=&#34;2017-05-01&#34;&gt;2017-05-01&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;ICARDA apparently started working on CG Core on their MEL repository&lt;/li&gt;&#xA;&lt;li&gt;They have done a few &lt;code&gt;cg.*&lt;/code&gt; fields, but not very consistent and even copy some of CGSpace items:&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://mel.cgiar.org/xmlui/handle/20.500.11766/6911?show=full&#34;&gt;https://mel.cgiar.org/xmlui/handle/20.500.11766/6911?show=full&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://cgspace.cgiar.org/handle/10568/73683&#34;&gt;https://cgspace.cgiar.org/handle/10568/73683&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2017-05-02&#34;&gt;2017-05-02&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Atmire got back about the Workflow Statistics issue, and apparently it&amp;rsquo;s a bug in the CUA module so they will send us a pull request&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2017-05-04&#34;&gt;2017-05-04&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Sync DSpace Test with database and assetstore from CGSpace&lt;/li&gt;&#xA;&lt;li&gt;Re-deploy DSpace Test with Atmire&amp;rsquo;s CUA patch for workflow statistics, run system updates, and restart the server&lt;/li&gt;&#xA;&lt;li&gt;Now I can see the workflow statistics and am able to select users, but everything returns 0 items&lt;/li&gt;&#xA;&lt;li&gt;Megan says there are still some mapped items are not appearing since last week, so I forced a full &lt;code&gt;index-discovery -b&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Need to remember to check if the collection has more items (currently 39 on CGSpace, but 118 on the freshly reindexed DSPace Test) tomorrow: &lt;a href=&#34;https://cgspace.cgiar.org/handle/10568/80731&#34;&gt;https://cgspace.cgiar.org/handle/10568/80731&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2017-05-05&#34;&gt;2017-05-05&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Discovered that CGSpace has ~700 items that are missing the &lt;code&gt;cg.identifier.status&lt;/code&gt; field&lt;/li&gt;&#xA;&lt;li&gt;Need to perhaps try using the &amp;ldquo;required metadata&amp;rdquo; curation task to find fields missing these items:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ [dspace]/bin/dspace curate -t requiredmetadata -i 10568/1 -r - &amp;gt; /tmp/curation.out&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&#xA;&lt;li&gt;It seems the curation task dies when it finds an item which has missing metadata&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2017-05-06&#34;&gt;2017-05-06&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Add &amp;ldquo;Blog Post&amp;rdquo; to &lt;code&gt;dc.type&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Create ticket on Atmire tracker to ask about commissioning them to develop the feature to expose ORCID via REST/OAI: &lt;a href=&#34;https://tracker.atmire.com/tickets-cgiar-ilri/view-ticket?id=510&#34;&gt;https://tracker.atmire.com/tickets-cgiar-ilri/view-ticket?id=510&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;According to the &lt;a href=&#34;https://wiki.lyrasis.org/display/DSDOC5x/Curation+System&#34;&gt;DSpace curation docs&lt;/a&gt; the fact that the &lt;code&gt;requiredmetadata&lt;/code&gt; curation task stops when it finds a missing metadata field is by design&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2017-05-07&#34;&gt;2017-05-07&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Testing one replacement for CCAFS Flagships (&lt;code&gt;cg.subject.ccafs&lt;/code&gt;), first changed in the submission forms, and then in the database:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ ./fix-metadata-values.py -i ccafs-flagships-may7.csv -f cg.subject.ccafs -t correct -m 210 -d dspace -u dspace -p fuuu&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&#xA;&lt;li&gt;Also, CCAFS wants to re-order their flagships to prioritize the Phase II ones&lt;/li&gt;&#xA;&lt;li&gt;Waiting for feedback from CCAFS, then I can merge &lt;a href=&#34;https://github.com/ilri/DSpace/pull/320&#34;&gt;#320&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2017-05-08&#34;&gt;2017-05-08&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Start working on CGIAR Library migration&lt;/li&gt;&#xA;&lt;li&gt;We decided to use AIP export to preserve the hierarchies and handles of communities and collections&lt;/li&gt;&#xA;&lt;li&gt;When ingesting some collections I was getting &lt;code&gt;java.lang.OutOfMemoryError: GC overhead limit exceeded&lt;/code&gt;, which can be solved by disabling the GC timeout with &lt;code&gt;-XX:-UseGCOverheadLimit&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Other times I was getting an error about heap space, so I kept bumping the RAM allocation by 512MB each time (up to 4096m!) it crashed&lt;/li&gt;&#xA;&lt;li&gt;This leads to tens of thousands of abandoned files in the assetstore, which need to be cleaned up using &lt;code&gt;dspace cleanup -v&lt;/code&gt;, or else you&amp;rsquo;ll run out of disk space&lt;/li&gt;&#xA;&lt;li&gt;In the end I realized it&amp;rsquo;s better to use submission mode (&lt;code&gt;-s&lt;/code&gt;) to ingest the community object as a single AIP without its children, followed by each of the collections:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ export JAVA_OPTS=&amp;#34;-Dfile.encoding=UTF-8 -Xmx2048m -XX:-UseGCOverheadLimit&amp;#34;&#xA;$ [dspace]/bin/dspace packager -s -o ignoreHandle=false -t AIP -e some@user.com -p 10568/87775 /home/aorth/10947-1/10947-1.zip&#xA;$ for collection in /home/aorth/10947-1/COLLECTION@10947-*; do [dspace]/bin/dspace packager -s -o ignoreHandle=false -t AIP -e some@user.com -p 10947/1 $collection; done&#xA;$ for item in /home/aorth/10947-1/ITEM@10947-*; do [dspace]/bin/dspace packager -r -f -u -t AIP -e some@user.com $item; done&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&#xA;&lt;li&gt;Note that in submission mode DSpace ignores the handle specified in &lt;code&gt;mets.xml&lt;/code&gt; in the zip file, so you need to turn that off with &lt;code&gt;-o ignoreHandle=false&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;The &lt;code&gt;-u&lt;/code&gt; option supresses prompts, to allow the process to run without user input&lt;/li&gt;&#xA;&lt;li&gt;Give feedback to CIFOR about their data quality:&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Suggestion: uppercase dc.subject, cg.coverage.region, and cg.coverage.subregion in your crosswalk so they match CGSpace and therefore can be faceted / reported on easier&lt;/li&gt;&#xA;&lt;li&gt;Suggestion: use CGSpace&amp;rsquo;s CRP names (cg.contributor.crp), see: dspace/config/input-forms.xml&lt;/li&gt;&#xA;&lt;li&gt;Suggestion: clean up duplicates and errors in funders, perhaps use a controlled vocabulary like ours, see: dspace/config/controlled-vocabularies/dc-description-sponsorship.xml&lt;/li&gt;&#xA;&lt;li&gt;Suggestion: use dc.type &amp;ldquo;Blog Post&amp;rdquo; instead of &amp;ldquo;Blog&amp;rdquo; for your blog post items (we are also adding a &amp;ldquo;Blog Post&amp;rdquo; type to CGSpace soon)&lt;/li&gt;&#xA;&lt;li&gt;Question: many of your items use dc.document.uri AND cg.identifier.url with the same text value?&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;Help Marianne from WLE with an Open Search query to show the latest WLE CRP outputs: &lt;a href=&#34;https://cgspace.cgiar.org/open-search/discover?query=crpsubject:WATER%2C+LAND+AND+ECOSYSTEMS&amp;amp;sort_by=2&amp;amp;order=DESC&#34;&gt;https://cgspace.cgiar.org/open-search/discover?query=crpsubject:WATER%2C+LAND+AND+ECOSYSTEMS&amp;amp;sort_by=2&amp;amp;order=DESC&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;This uses the webui&amp;rsquo;s item list sort options, see &lt;code&gt;webui.itemlist.sort-option&lt;/code&gt; in &lt;code&gt;dspace.cfg&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;The equivalent Discovery search would be: &lt;a href=&#34;https://cgspace.cgiar.org/discover?filtertype_1=crpsubject&amp;amp;filter_relational_operator_1=equals&amp;amp;filter_1=WATER%2C+LAND+AND+ECOSYSTEMS&amp;amp;submit_apply_filter=&amp;amp;query=&amp;amp;rpp=10&amp;amp;sort_by=dc.date.issued_dt&amp;amp;order=desc&#34;&gt;https://cgspace.cgiar.org/discover?filtertype_1=crpsubject&amp;amp;filter_relational_operator_1=equals&amp;amp;filter_1=WATER%2C+LAND+AND+ECOSYSTEMS&amp;amp;submit_apply_filter=&amp;amp;query=&amp;amp;rpp=10&amp;amp;sort_by=dc.date.issued_dt&amp;amp;order=desc&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2017-05-09&#34;&gt;2017-05-09&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;The CGIAR Library metadata has some blank metadata values, which leads to &lt;code&gt;|||&lt;/code&gt; in the Discovery facets&lt;/li&gt;&#xA;&lt;li&gt;Clean these up in the database using:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;dspace=# delete from metadatavalue where resource_type_id=2 and text_value=&amp;#39;&amp;#39;;&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&#xA;&lt;li&gt;I ended up running into issues during data cleaning and decided to wipe out the entire community and re-sync DSpace Test assetstore and database from CGSpace rather than waiting for the cleanup task to clean up&lt;/li&gt;&#xA;&lt;li&gt;Hours into the re-ingestion I ran into more errors, and had to erase everything and start over &lt;em&gt;again&lt;/em&gt;!&lt;/li&gt;&#xA;&lt;li&gt;Now, no matter what I do I keep getting foreign key errors&amp;hellip;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Caused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint &amp;#34;handle_pkey&amp;#34;&#xA;  Detail: Key (handle_id)=(80928) already exists.&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&#xA;&lt;li&gt;I think those errors actually come from me running the &lt;code&gt;update-sequences.sql&lt;/code&gt; script while Tomcat/DSpace are running&lt;/li&gt;&#xA;&lt;li&gt;Apparently you need to stop Tomcat!&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2017-05-10&#34;&gt;2017-05-10&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Atmire says they are willing to extend the ORCID implementation, and I&amp;rsquo;ve asked them to provide a quote&lt;/li&gt;&#xA;&lt;li&gt;I clarified that the scope of the implementation should be that ORCIDs are stored in the database and exposed via REST / API like other fields&lt;/li&gt;&#xA;&lt;li&gt;Finally finished importing all the CGIAR Library content, final method was:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ export JAVA_OPTS=&amp;#34;-Dfile.encoding=UTF-8 -Xmx3072m -XX:-UseGCOverheadLimit&amp;#34;&#xA;$ [dspace]/bin/dspace packager -r -a -t AIP -o skipIfParentMissing=true -e some@user.com -p 10568/80923 /home/aorth/10947-2517/10947-2517.zip&#xA;$ [dspace]/bin/dspace packager -r -a -t AIP -o skipIfParentMissing=true -e some@user.com -p 10568/80923 /home/aorth/10947-2515/10947-2515.zip&#xA;$ [dspace]/bin/dspace packager -r -a -t AIP -o skipIfParentMissing=true -e some@user.com -p 10568/80923 /home/aorth/10947-2516/10947-2516.zip&#xA;$ [dspace]/bin/dspace packager -s -t AIP -o ignoreHandle=false -e some@user.com -p 10568/80923 /home/aorth/10947-1/10947-1.zip&#xA;$ for collection in /home/aorth/10947-1/COLLECTION@10947-*; do [dspace]/bin/dspace packager -s -o ignoreHandle=false -t AIP -e some@user.com -p 10947/1 $collection; done&#xA;$ for item in /home/aorth/10947-1/ITEM@10947-*; do [dspace]/bin/dspace packager -r -f -u -t AIP -e some@user.com $item; done&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&#xA;&lt;li&gt;Basically, import the smaller communities using recursive AIP import (with &lt;code&gt;skipIfParentMissing&lt;/code&gt;)&lt;/li&gt;&#xA;&lt;li&gt;Then, for the larger collection, create the community, collections, and items separately, ingesting the items one by one&lt;/li&gt;&#xA;&lt;li&gt;The &lt;code&gt;-XX:-UseGCOverheadLimit&lt;/code&gt; JVM option helps with some issues in large imports&lt;/li&gt;&#xA;&lt;li&gt;After this I ran the &lt;code&gt;update-sequences.sql&lt;/code&gt; script (with Tomcat shut down), and cleaned up the 200+ blank metadata records:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;dspace=# delete from metadatavalue where resource_type_id=2 and text_value=&amp;#39;&amp;#39;;&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;2017-05-13&#34;&gt;2017-05-13&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;After quite a bit of troubleshooting with importing cleaned up data as CSV, it seems that there are actually &lt;a href=&#34;https://en.wikipedia.org/wiki/Null_character&#34;&gt;NUL&lt;/a&gt; characters in the &lt;code&gt;dc.description.abstract&lt;/code&gt; field (at least) on the lines where CSV importing was failing&lt;/li&gt;&#xA;&lt;li&gt;I tried to find a way to remove the characters in vim or Open Refine, but decided it was quicker to just remove the column temporarily and import it&lt;/li&gt;&#xA;&lt;li&gt;The import was successful and detected 2022 changes, which should likely be the rest that were failing to import before&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2017-05-15&#34;&gt;2017-05-15&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;To delete the blank lines that cause isses during import we need to use a regex in vim &lt;code&gt;g/^$/d&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;After that I started looking in the &lt;code&gt;dc.subject&lt;/code&gt; field to try to pull countries and regions out, but there are too many values in there&lt;/li&gt;&#xA;&lt;li&gt;Bump the Academicons dependency of the Mirage 2 themes from 1.6.0 to 1.8.0 because the upstream deleted the old tag and now the build is failing: &lt;a href=&#34;https://github.com/ilri/DSpace/pull/321&#34;&gt;#321&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;Merge changes to CCAFS project identifiers and flagships: &lt;a href=&#34;https://github.com/ilri/DSpace/pull/320&#34;&gt;#320&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;Run updates for CCAFS flagships on CGSpace:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ ./fix-metadata-values.py -i /tmp/ccafs-flagships-may7.csv -f cg.subject.ccafs -t correct -m 210 -d dspace -u dspace -p &amp;#39;fuuu&amp;#39;&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;These include:&lt;/p&gt;</description>
    </item>
    <item>
      <title>April, 2017</title>
      <link>https://alanorth.github.io/cgspace-notes/2017-04/</link>
      <pubDate>Sun, 02 Apr 2017 17:08:52 +0200</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2017-04/</guid>
      <description>&lt;h2 id=&#34;2017-04-02&#34;&gt;2017-04-02&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Merge one change to CCAFS flagships that I had forgotten to remove last month (&amp;ldquo;MANAGING CLIMATE RISK&amp;rdquo;): &lt;a href=&#34;https://github.com/ilri/DSpace/pull/317&#34;&gt;https://github.com/ilri/DSpace/pull/317&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;Quick proof-of-concept hack to add &lt;code&gt;dc.rights&lt;/code&gt; to the input form, including some inline instructions/hints:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://alanorth.github.io/cgspace-notes/2017/04/dc-rights.png&#34; alt=&#34;dc.rights in the submission form&#34;&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Remove redundant/duplicate text in the DSpace submission license&lt;/li&gt;&#xA;&lt;li&gt;Testing the CMYK patch on a collection with 650 items:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ [dspace]/bin/dspace filter-media -f -i 10568/16498 -p &amp;#34;ImageMagick PDF Thumbnail&amp;#34; -v &amp;gt;&amp;amp; /tmp/filter-media-cmyk.txt&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>March, 2017</title>
      <link>https://alanorth.github.io/cgspace-notes/2017-03/</link>
      <pubDate>Wed, 01 Mar 2017 17:08:52 +0200</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2017-03/</guid>
      <description>&lt;h2 id=&#34;2017-03-01&#34;&gt;2017-03-01&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Run the 279 CIAT author corrections on CGSpace&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2017-03-02&#34;&gt;2017-03-02&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Skype with Michael and Peter, discussing moving the CGIAR Library to CGSpace&lt;/li&gt;&#xA;&lt;li&gt;CGIAR people possibly open to moving content, redirecting library.cgiar.org to CGSpace and letting CGSpace resolve their handles&lt;/li&gt;&#xA;&lt;li&gt;They might come in at the top level in one &amp;ldquo;CGIAR System&amp;rdquo; community, or with several communities&lt;/li&gt;&#xA;&lt;li&gt;I need to spend a bit of time looking at the multiple handle support in DSpace and see if new content can be minted in both handles, or just one?&lt;/li&gt;&#xA;&lt;li&gt;Need to send Peter and Michael some notes about this in a few days&lt;/li&gt;&#xA;&lt;li&gt;Also, need to consider talking to Atmire about hiring them to bring ORCiD metadata to REST / OAI&lt;/li&gt;&#xA;&lt;li&gt;Filed an issue on DSpace issue tracker for the &lt;code&gt;filter-media&lt;/code&gt; bug that causes it to process JPGs even when limiting to the PDF thumbnail plugin: &lt;a href=&#34;https://jira.duraspace.org/browse/DS-3516&#34;&gt;DS-3516&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;Discovered that the ImageMagic &lt;code&gt;filter-media&lt;/code&gt; plugin creates JPG thumbnails with the CMYK colorspace when the source PDF is using CMYK&lt;/li&gt;&#xA;&lt;li&gt;Interestingly, it seems DSpace 4.x&amp;rsquo;s thumbnails were sRGB, but forcing regeneration using DSpace 5.x&amp;rsquo;s ImageMagick plugin creates CMYK JPGs if the source PDF was CMYK (see &lt;a href=&#34;https://cgspace.cgiar.org/handle/10568/51999&#34;&gt;10568/51999&lt;/a&gt;):&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ identify ~/Desktop/alc_contrastes_desafios.jpg&#xA;/Users/aorth/Desktop/alc_contrastes_desafios.jpg JPEG 464x600 464x600+0+0 8-bit CMYK 168KB 0.000u 0:00.000&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>February, 2017</title>
      <link>https://alanorth.github.io/cgspace-notes/2017-02/</link>
      <pubDate>Tue, 07 Feb 2017 07:04:52 -0800</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2017-02/</guid>
      <description>&lt;h2 id=&#34;2017-02-07&#34;&gt;2017-02-07&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;An item was mapped twice erroneously again, so I had to remove one of the mappings manually:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;dspace=# select * from collection2item where item_id = &amp;#39;80278&amp;#39;;&#xA;  id   | collection_id | item_id&#xA;-------+---------------+---------&#xA; 92551 |           313 |   80278&#xA; 92550 |           313 |   80278&#xA; 90774 |          1051 |   80278&#xA;(3 rows)&#xA;dspace=# delete from collection2item where id = 92551 and item_id = 80278;&#xA;DELETE 1&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&#xA;&lt;li&gt;Create issue on GitHub to track the addition of CCAFS Phase II project tags (&lt;a href=&#34;https://github.com/ilri/DSpace/issues/301&#34;&gt;#301&lt;/a&gt;)&lt;/li&gt;&#xA;&lt;li&gt;Looks like we&amp;rsquo;ll be using &lt;code&gt;cg.identifier.ccafsprojectpii&lt;/code&gt; as the field name&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>January, 2017</title>
      <link>https://alanorth.github.io/cgspace-notes/2017-01/</link>
      <pubDate>Mon, 02 Jan 2017 10:43:00 +0300</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2017-01/</guid>
      <description>&lt;h2 id=&#34;2017-01-02&#34;&gt;2017-01-02&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;I checked to see if the Solr sharding task that is supposed to run on January 1st had run and saw there was an error&lt;/li&gt;&#xA;&lt;li&gt;I tested on DSpace Test as well and it doesn&amp;rsquo;t work there either&lt;/li&gt;&#xA;&lt;li&gt;I asked on the dspace-tech mailing list because it seems to be broken, and actually now I&amp;rsquo;m not sure if we&amp;rsquo;ve ever had the sharding task run successfully over all these years&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>December, 2016</title>
      <link>https://alanorth.github.io/cgspace-notes/2016-12/</link>
      <pubDate>Fri, 02 Dec 2016 10:43:00 +0300</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2016-12/</guid>
      <description>&lt;h2 id=&#34;2016-12-02&#34;&gt;2016-12-02&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;CGSpace was down for five hours in the morning while I was sleeping&lt;/li&gt;&#xA;&lt;li&gt;While looking in the logs for errors, I see tons of warnings about Atmire MQM:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;2016-12-02 03:00:32,352 WARN  com.atmire.metadataquality.batchedit.BatchEditConsumer @ BatchEditConsumer should not have been given this kind of Subject in an event, skipping: org.dspace.event.Event(eventType=CREATE, SubjectType=BUNDLE, SubjectID=70316, ObjectType=(Unknown), ObjectID=-1, TimeStamp=1480647632305, dispatcher=1544803905, detail=[null], transactionID=&amp;#34;TX157907838689377964651674089851855413607&amp;#34;)&#xA;2016-12-02 03:00:32,353 WARN  com.atmire.metadataquality.batchedit.BatchEditConsumer @ BatchEditConsumer should not have been given this kind of Subject in an event, skipping: org.dspace.event.Event(eventType=MODIFY_METADATA, SubjectType=BUNDLE, SubjectID =70316, ObjectType=(Unknown), ObjectID=-1, TimeStamp=1480647632309, dispatcher=1544803905, detail=&amp;#34;dc.title&amp;#34;, transactionID=&amp;#34;TX157907838689377964651674089851855413607&amp;#34;)&#xA;2016-12-02 03:00:32,353 WARN  com.atmire.metadataquality.batchedit.BatchEditConsumer @ BatchEditConsumer should not have been given this kind of Subject in an event, skipping: org.dspace.event.Event(eventType=ADD, SubjectType=ITEM, SubjectID=80044, Object Type=BUNDLE, ObjectID=70316, TimeStamp=1480647632311, dispatcher=1544803905, detail=&amp;#34;THUMBNAIL&amp;#34;, transactionID=&amp;#34;TX157907838689377964651674089851855413607&amp;#34;)&#xA;2016-12-02 03:00:32,353 WARN  com.atmire.metadataquality.batchedit.BatchEditConsumer @ BatchEditConsumer should not have been given this kind of Subject in an event, skipping: org.dspace.event.Event(eventType=ADD, SubjectType=BUNDLE, SubjectID=70316, Obje ctType=BITSTREAM, ObjectID=86715, TimeStamp=1480647632318, dispatcher=1544803905, detail=&amp;#34;-1&amp;#34;, transactionID=&amp;#34;TX157907838689377964651674089851855413607&amp;#34;)&#xA;2016-12-02 03:00:32,353 WARN  com.atmire.metadataquality.batchedit.BatchEditConsumer @ BatchEditConsumer should not have been given this kind of Subject in an event, skipping: org.dspace.event.Event(eventType=MODIFY, SubjectType=ITEM, SubjectID=80044, ObjectType=(Unknown), ObjectID=-1, TimeStamp=1480647632351, dispatcher=1544803905, detail=[null], transactionID=&amp;#34;TX157907838689377964651674089851855413607&amp;#34;)&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&#xA;&lt;li&gt;I see thousands of them in the logs for the last few months, so it&amp;rsquo;s not related to the DSpace 5.5 upgrade&lt;/li&gt;&#xA;&lt;li&gt;I&amp;rsquo;ve raised a ticket with Atmire to ask&lt;/li&gt;&#xA;&lt;li&gt;Another worrying error from dspace.log is:&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>November, 2016</title>
      <link>https://alanorth.github.io/cgspace-notes/2016-11/</link>
      <pubDate>Tue, 01 Nov 2016 09:21:00 +0300</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2016-11/</guid>
      <description>&lt;h2 id=&#34;2016-11-01&#34;&gt;2016-11-01&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Add &lt;code&gt;dc.type&lt;/code&gt; to the output options for Atmire&amp;rsquo;s Listings and Reports module (&lt;a href=&#34;https://github.com/ilri/DSpace/pull/286&#34;&gt;#286&lt;/a&gt;)&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://alanorth.github.io/cgspace-notes/2016/11/listings-and-reports.png&#34; alt=&#34;Listings and Reports with output type&#34;&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>October, 2016</title>
      <link>https://alanorth.github.io/cgspace-notes/2016-10/</link>
      <pubDate>Mon, 03 Oct 2016 15:53:00 +0300</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2016-10/</guid>
      <description>&lt;h2 id=&#34;2016-10-03&#34;&gt;2016-10-03&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Testing adding &lt;a href=&#34;https://wiki.lyrasis.org/display/DSDOC5x/ORCID+Integration#ORCIDIntegration-EditingexistingitemsusingBatchCSVEditing&#34;&gt;ORCIDs to a CSV&lt;/a&gt; file for a single item to see if the author orders get messed up&lt;/li&gt;&#xA;&lt;li&gt;Need to test the following scenarios to see how author order is affected:&#xA;&lt;ul&gt;&#xA;&lt;li&gt;ORCIDs only&lt;/li&gt;&#xA;&lt;li&gt;ORCIDs plus normal authors&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;I exported a random item&amp;rsquo;s metadata as CSV, deleted &lt;em&gt;all columns&lt;/em&gt; except id and collection, and made a new coloum called &lt;code&gt;ORCID:dc.contributor.author&lt;/code&gt; with the following random ORCIDs from the ORCID registry:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;0000-0002-6115-0956||0000-0002-3812-8793||0000-0001-7462-405X&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>September, 2016</title>
      <link>https://alanorth.github.io/cgspace-notes/2016-09/</link>
      <pubDate>Thu, 01 Sep 2016 15:53:00 +0300</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2016-09/</guid>
      <description>&lt;h2 id=&#34;2016-09-01&#34;&gt;2016-09-01&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Discuss helping CCAFS with some batch tagging of ORCID IDs for their authors&lt;/li&gt;&#xA;&lt;li&gt;Discuss how the migration of CGIAR&amp;rsquo;s Active Directory to a flat structure will break our LDAP groups in DSpace&lt;/li&gt;&#xA;&lt;li&gt;We had been using &lt;code&gt;DC=ILRI&lt;/code&gt; to determine whether a user was ILRI or not&lt;/li&gt;&#xA;&lt;li&gt;It looks like we might be able to use OUs now, instead of DCs:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ ldapsearch -x -H ldaps://svcgroot2.cgiarad.org:3269/ -b &amp;#34;dc=cgiarad,dc=org&amp;#34; -D &amp;#34;admigration1@cgiarad.org&amp;#34; -W &amp;#34;(sAMAccountName=admigration1)&amp;#34;&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>August, 2016</title>
      <link>https://alanorth.github.io/cgspace-notes/2016-08/</link>
      <pubDate>Mon, 01 Aug 2016 15:53:00 +0300</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2016-08/</guid>
      <description>&lt;h2 id=&#34;2016-08-01&#34;&gt;2016-08-01&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Add updated distribution license from Sisay (&lt;a href=&#34;https://github.com/ilri/DSpace/issues/259&#34;&gt;#259&lt;/a&gt;)&lt;/li&gt;&#xA;&lt;li&gt;Play with upgrading Mirage 2 dependencies in &lt;code&gt;bower.json&lt;/code&gt; because most are several versions of out date&lt;/li&gt;&#xA;&lt;li&gt;Bootstrap is at 3.3.0 but upstream is at 3.3.7, and upgrading to anything beyond 3.3.1 breaks glyphicons and probably more&lt;/li&gt;&#xA;&lt;li&gt;bower stuff is a dead end, waste of time, too many issues&lt;/li&gt;&#xA;&lt;li&gt;Anything after Bootstrap 3.3.1 makes glyphicons disappear (HTTP 404 trying to access from incorrect path of &lt;code&gt;fonts&lt;/code&gt;)&lt;/li&gt;&#xA;&lt;li&gt;Start working on DSpace 5.1 → 5.5 port:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ git checkout -b 55new 5_x-prod&#xA;$ git reset --hard ilri/5_x-prod&#xA;$ git rebase -i dspace-5.5&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>July, 2016</title>
      <link>https://alanorth.github.io/cgspace-notes/2016-07/</link>
      <pubDate>Fri, 01 Jul 2016 10:53:00 +0300</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2016-07/</guid>
      <description>&lt;h2 id=&#34;2016-07-01&#34;&gt;2016-07-01&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Add &lt;code&gt;dc.description.sponsorship&lt;/code&gt; to Discovery sidebar facets and make investors clickable in item view (&lt;a href=&#34;https://github.com/ilri/DSpace/issues/232&#34;&gt;#232&lt;/a&gt;)&lt;/li&gt;&#xA;&lt;li&gt;I think this query should find and replace all authors that have &amp;ldquo;,&amp;rdquo; at the end of their names:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;dspacetest=# update metadatavalue set text_value = regexp_replace(text_value, &amp;#39;(^.+?),$&amp;#39;, &amp;#39;\1&amp;#39;) where metadata_field_id=3 and resource_type_id=2 and text_value ~ &amp;#39;^.+?,$&amp;#39;;&#xA;UPDATE 95&#xA;dspacetest=# select text_value from  metadatavalue where metadata_field_id=3 and resource_type_id=2 and text_value ~ &amp;#39;^.+?,$&amp;#39;;&#xA; text_value&#xA;------------&#xA;(0 rows)&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&#xA;&lt;li&gt;In this case the select query was showing 95 results before the update&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>June, 2016</title>
      <link>https://alanorth.github.io/cgspace-notes/2016-06/</link>
      <pubDate>Wed, 01 Jun 2016 10:53:00 +0300</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2016-06/</guid>
      <description>&lt;h2 id=&#34;2016-06-01&#34;&gt;2016-06-01&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Experimenting with IFPRI OAI (we want to harvest their publications)&lt;/li&gt;&#xA;&lt;li&gt;After reading the &lt;a href=&#34;https://www.oclc.org/support/services/contentdm/help/server-admin-help/oai-support.en.html&#34;&gt;ContentDM documentation&lt;/a&gt; I found IFPRI&amp;rsquo;s OAI endpoint: &lt;a href=&#34;http://ebrary.ifpri.org/oai/oai.php&#34;&gt;http://ebrary.ifpri.org/oai/oai.php&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;After reading the &lt;a href=&#34;https://www.openarchives.org/OAI/openarchivesprotocol.html&#34;&gt;OAI documentation&lt;/a&gt; and testing with an &lt;a href=&#34;http://validator.oaipmh.com/&#34;&gt;OAI validator&lt;/a&gt; I found out how to get their publications&lt;/li&gt;&#xA;&lt;li&gt;This is their publications set: &lt;a href=&#34;http://ebrary.ifpri.org/oai/oai.php?verb=ListRecords&amp;amp;from=2016-01-01&amp;amp;set=p15738coll2&amp;amp;metadataPrefix=oai_dc&#34;&gt;http://ebrary.ifpri.org/oai/oai.php?verb=ListRecords&amp;amp;from=2016-01-01&amp;amp;set=p15738coll2&amp;amp;metadataPrefix=oai_dc&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;You can see the others by using the OAI &lt;code&gt;ListSets&lt;/code&gt; verb: &lt;a href=&#34;http://ebrary.ifpri.org/oai/oai.php?verb=ListSets&#34;&gt;http://ebrary.ifpri.org/oai/oai.php?verb=ListSets&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;Working on second phase of metadata migration, looks like this will work for moving CPWF-specific data in &lt;code&gt;dc.identifier.fund&lt;/code&gt; to &lt;code&gt;cg.identifier.cpwfproject&lt;/code&gt; and then the rest to &lt;code&gt;dc.description.sponsorship&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>May, 2016</title>
      <link>https://alanorth.github.io/cgspace-notes/2016-05/</link>
      <pubDate>Sun, 01 May 2016 23:06:00 +0300</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2016-05/</guid>
      <description>&lt;h2 id=&#34;2016-05-01&#34;&gt;2016-05-01&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Since yesterday there have been 10,000 REST errors and the site has been unstable again&lt;/li&gt;&#xA;&lt;li&gt;I have blocked access to the API now&lt;/li&gt;&#xA;&lt;li&gt;There are 3,000 IPs accessing the REST API in a 24-hour period!&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# awk &amp;#39;{print $1}&amp;#39; /var/log/nginx/rest.log  | uniq | wc -l&#xA;3168&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>April, 2016</title>
      <link>https://alanorth.github.io/cgspace-notes/2016-04/</link>
      <pubDate>Mon, 04 Apr 2016 11:06:00 +0300</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2016-04/</guid>
      <description>&lt;h2 id=&#34;2016-04-04&#34;&gt;2016-04-04&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Looking at log file use on CGSpace and notice that we need to work on our cron setup a bit&lt;/li&gt;&#xA;&lt;li&gt;We are backing up all logs in the log folder, including useless stuff like solr, cocoon, handle-plugin, etc&lt;/li&gt;&#xA;&lt;li&gt;After running DSpace for over five years I&amp;rsquo;ve never needed to look in any other log file than dspace.log, leave alone one from last year!&lt;/li&gt;&#xA;&lt;li&gt;This will save us a few gigs of backup space we&amp;rsquo;re paying for on S3&lt;/li&gt;&#xA;&lt;li&gt;Also, I noticed the &lt;code&gt;checker&lt;/code&gt; log has some errors we should pay attention to:&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>March, 2016</title>
      <link>https://alanorth.github.io/cgspace-notes/2016-03/</link>
      <pubDate>Wed, 02 Mar 2016 16:50:00 +0300</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2016-03/</guid>
      <description>&lt;h2 id=&#34;2016-03-02&#34;&gt;2016-03-02&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Looking at issues with author authorities on CGSpace&lt;/li&gt;&#xA;&lt;li&gt;For some reason we still have the &lt;code&gt;index-lucene-update&lt;/code&gt; cron job active on CGSpace, but I&amp;rsquo;m pretty sure we don&amp;rsquo;t need it as of the latest few versions of Atmire&amp;rsquo;s Listings and Reports module&lt;/li&gt;&#xA;&lt;li&gt;Reinstall my local (Mac OS X) DSpace stack with Tomcat 7, PostgreSQL 9.3, and Java JDK 1.7 to match environment on CGSpace server&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>February, 2016</title>
      <link>https://alanorth.github.io/cgspace-notes/2016-02/</link>
      <pubDate>Fri, 05 Feb 2016 13:18:00 +0300</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2016-02/</guid>
      <description>&lt;h2 id=&#34;2016-02-05&#34;&gt;2016-02-05&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Looking at some DAGRIS data for Abenet Yabowork&lt;/li&gt;&#xA;&lt;li&gt;Lots of issues with spaces, newlines, etc causing the import to fail&lt;/li&gt;&#xA;&lt;li&gt;I noticed we have a very &lt;em&gt;interesting&lt;/em&gt; list of countries on CGSpace:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://alanorth.github.io/cgspace-notes/2016/02/cgspace-countries.png&#34; alt=&#34;CGSpace country list&#34;&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Not only are there 49,000 countries, we have some blanks (25)&amp;hellip;&lt;/li&gt;&#xA;&lt;li&gt;Also, lots of things like &amp;ldquo;COTE D`LVOIRE&amp;rdquo; and &amp;ldquo;COTE D IVOIRE&amp;rdquo;&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>January, 2016</title>
      <link>https://alanorth.github.io/cgspace-notes/2016-01/</link>
      <pubDate>Wed, 13 Jan 2016 13:18:00 +0300</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2016-01/</guid>
      <description>&lt;h2 id=&#34;2016-01-13&#34;&gt;2016-01-13&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Move ILRI collection &lt;code&gt;10568/12503&lt;/code&gt; from &lt;code&gt;10568/27869&lt;/code&gt; to &lt;code&gt;10568/27629&lt;/code&gt; using the &lt;a href=&#34;https://gist.github.com/alanorth/392c4660e8b022d99dfa&#34;&gt;move_collections.sh&lt;/a&gt; script I wrote last year.&lt;/li&gt;&#xA;&lt;li&gt;I realized it is only necessary to clear the Cocoon cache after moving collections—rather than reindexing—as no metadata has changed, and therefore no search or browse indexes need to be updated.&lt;/li&gt;&#xA;&lt;li&gt;Update GitHub wiki for documentation of &lt;a href=&#34;https://github.com/ilri/DSpace/wiki/Maintenance-Tasks&#34;&gt;maintenance tasks&lt;/a&gt;.&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>December, 2015</title>
      <link>https://alanorth.github.io/cgspace-notes/2015-12/</link>
      <pubDate>Wed, 02 Dec 2015 13:18:00 +0300</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2015-12/</guid>
      <description>&lt;h2 id=&#34;2015-12-02&#34;&gt;2015-12-02&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Replace &lt;code&gt;lzop&lt;/code&gt; with &lt;code&gt;xz&lt;/code&gt; in log compression cron jobs on DSpace Test—it uses less space:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# cd /home/dspacetest.cgiar.org/log&#xA;# ls -lh dspace.log.2015-11-18*&#xA;-rw-rw-r-- 1 tomcat7 tomcat7 2.0M Nov 18 23:59 dspace.log.2015-11-18&#xA;-rw-rw-r-- 1 tomcat7 tomcat7 387K Nov 18 23:59 dspace.log.2015-11-18.lzo&#xA;-rw-rw-r-- 1 tomcat7 tomcat7 169K Nov 18 23:59 dspace.log.2015-11-18.xz&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>November, 2015</title>
      <link>https://alanorth.github.io/cgspace-notes/2015-11/</link>
      <pubDate>Mon, 23 Nov 2015 17:00:57 +0300</pubDate>
      <guid>https://alanorth.github.io/cgspace-notes/2015-11/</guid>
      <description>&lt;h2 id=&#34;2015-11-22&#34;&gt;2015-11-22&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;CGSpace went down&lt;/li&gt;&#xA;&lt;li&gt;Looks like DSpace exhausted its PostgreSQL connection pool&lt;/li&gt;&#xA;&lt;li&gt;Last week I had increased the limit from 30 to 60, which seemed to help, but now there are many more idle connections:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ psql -c &amp;#39;SELECT * from pg_stat_activity;&amp;#39; | grep idle | grep -c cgspace&#xA;78&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
  </channel>
</rss>
