+++
date = "2017-02-07T07:04:52-08:00"
author = "Alan Orth"
title = "February, 2017"
tags = ["Notes"]

+++
## 2017-02-07

- An item was mapped twice erroneously again, so I had to remove one of the mappings manually:

```
dspace=# select * from collection2item where item_id = '80278';
  id   | collection_id | item_id
-------+---------------+---------
 92551 |           313 |   80278
 92550 |           313 |   80278
 90774 |          1051 |   80278
(3 rows)
dspace=# delete from collection2item where id = 92551 and item_id = 80278;
DELETE 1
```

- Create issue on GitHub to track the addition of CCAFS Phase II project tags ([#301](https://github.com/ilri/DSpace/issues/301))
- Looks like we'll be using `cg.identifier.ccafsprojectpii` as the field name

<!--more-->

## 2017-02-08

- We also need to rename some of the CCAFS Phase I flagships:
  - CLIMATE-SMART AGRICULTURAL PRACTICES → CLIMATE-SMART TECHNOLOGIES AND PRACTICES
  - CLIMATE RISK MANAGEMENT → CLIMATE SERVICES AND SAFETY NETS
  - LOW EMISSIONS AGRICULTURE → LOW EMISSIONS DEVELOPMENT
  - POLICIES AND INSTITUTIONS → PRIORITIES AND POLICIES FOR CSA
- The climate risk management one doesn't exist, so I will have to ask Magdalena if they want me to add it to the input forms
- Start testing some nearly 500 author corrections that CCAFS sent me:

```
$ ./fix-metadata-values.py -i /tmp/CCAFS-Authors-Feb-7.csv -f dc.contributor.author -t 'correct name' -m 3 -d dspace -u dspace -p fuuu
```

## 2017-02-09

- More work on CCAFS Phase II stuff
- Looks like simply adding a new metadata field to `dspace/config/registries/cgiar-types.xml` and restarting DSpace causes the field to get added to the rregistry
- It requires a restart but at least it allows you to manage the registry programmatically
- It's not a very good way to manage the registry, though, as removing one there doesn't cause it to be removed from the registry, and we always restore from database backups so there would never be a scenario when we needed these to be created
- Testing some corrections on CCAFS Phase II flagships (`cg.subject.ccafs`):

```
$ ./fix-metadata-values.py -i ccafs-flagships-feb7.csv -f cg.subject.ccafs -t correct -m 210 -d dspace -u dspace -p fuuu
```
